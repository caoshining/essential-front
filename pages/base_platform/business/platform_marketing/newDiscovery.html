<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新建发现</title>
    <link rel="stylesheet" type="text/css" href="css/busi_platform/business/discovery/htmleaf-demo.css"/>
    <link rel="stylesheet" type="text/css" href="css/busi_platform/business/discovery/animate.css"/>
    <link rel="stylesheet" type="text/css" href="css/busi_platform/business/discovery/style.css"/>
    <link rel="stylesheet" type="text/css" href="css/base_platform/business/platform_marketing/newDiscovery.css"/>

</head>
<body>
<div class="discovery_layout">
    <h5>营销推广>发现管理>专栏列表</h5>
    <div class="discoveryContent">

        <!--Tab选项卡-->
        <ul class="tabUl">
            <li class="selected li1">基本信息</li>
            <li class="li2">正文内容</li>
            <li class="li3">相关商品</li>
        </ul>
        <!--基本信息-->
        <div class="content1 discoveryDiv">
            <table>
                <tr>
                    <td>标题:</td>
                    <td><input type="text" id="title" placeholder="标题长度20字以内"/></td>
                </tr>
                <tr>
                    <td>专栏:</td>
                    <td>
                        <select name="Special" id="column"></select>
                    </td>
                </tr>
                <tr>
                    <td>专栏logo:</td>
                    <td>
                        <img src="" class="logoPic1">
                        <div id="columnLogo"></div>
                    </td>
                </tr>
                <tr>
                    <td>作者:</td>
                    <td>
                        <input type="text" id="author"/>
                    </td>
                </tr>
                <tr>
                    <td>添加主图:</td>
                    <td>
                        <img src="" class="mainPic2">
                        <div id="AddMasterPic"></div>
                    </td>
                </tr>
                <tr>
                    <td>关键词:</td>
                    <td class="articlekeyWords_content">
                        <textarea class="NewarticlekeyWords" placeholder="100字以内" rows="5" maxlength="100" cols="30"></textarea>
                        <span class="Make_keywords_count"><span id="Make_keywords_Lastcount">0</span>/100</span>
                        <!--<p class="Make_keywords_wram">字数限制在100字符以内,关键词之间请用","隔开</p>-->
                    </td>
                </tr>
                <tr>
                    <td>文章摘要:</td>
                    <td>
                        <textarea id="articelSummary" placeholder="40字以内" rows="5" cols="30"></textarea>
                    </td>
                </tr>
            </table>
        </div>

        <!--富文本内容-->
        <div class="content2 discoveryDiv">
            <script id="editor1" type="text/plain" style="width:801px;height:300px;"></script>
        </div>

        <!--相关商品-->
        <div class="content3 discoveryDiv" id="shopHtml">
            <div class="linkShop">
                <span class="add" id="addEssential_shop">添加奕赏商品</span>
                <span class="add" id="addOutChains">添加外链商品</span>
            </div>

            <!--添加商品列表显示-->
            <div id="DiscoveryShop" class="DiscoveryShop" style="display: none;"></div>

            <!--添加奕赏商品-->
            <div id="relationProductList" style="display: none;">
                <div class="mainDiv">
                    <div class="productSearch">
                        <div class="productInput">
                            <label>商品名称:<input type="text" id="sProductName"></label>
                            <label>商品代码:<input type="text" id="nCommodityCode"></label>
                            <label>商品分类:<select id="allCategory">
                                    <option value="">所有分类</option>
                                </select>
                            </label>
                            <label>商家名称:<select id="AllShopName">
                                    <option value="">所有名称</option>
                                </select>
                            </label>
                            <label>商品品牌:<select id="sAllBrand">
                                    <option value="">所有品牌</option>
                                </select>
                            </label>
                            <label>价格区间:<input type="text" style="width: 85px;"> 到 <input type="text" style="width:85px;;"></label>
                            <label>是否自营:<select id="selfName">
                                    <option value="">所有状态</option>
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </label>
                            <span class="FilterProduct">筛选</span>
                        </div>
                    </div>
                    <div class="productList">
                        <table class="gridtable">
                            <thead>
                            <tr>
                                <th>商品信息</th>
                                <th>商品品牌</th>
                                <th>分类</th>
                                <th>商家</th>
                                <th>库存</th>
                                <th>销量</th>
                                <th>创建时间</th>
                                <th>商品状态</th>
                                <th>是否自营</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody id="Essential_Lists">

                            </tbody>
                        </table>
                    </div>
                    <div class="pagination"></div>
                </div>
            </div>

            <!--添加外链商品-->
            <div id="outProducts" class="outChains">
                <table>
                    <tr>
                        <td>外链商品名称：</td>
                        <td><input type="text" placeholder="10字以内" id="productName"></td>
                    </tr>
                    <tr>
                        <td>价格：</td>
                        <td><input type="text" id="marketPrice"> 元</td>
                    </tr>
                    <tr>
                        <td>商品品牌：</td>
                        <td><input type="text" id="brandName"></td>
                    </tr>
                    <tr>
                        <td>商品主图：</td>
                        <td>
                            <img src="" style="width: 80px;height: 80px;" id="outProductPic">
                            <p>请上传jpg，jpeg，bmp格式，<br>文件大小小于1M，图像尺寸330*330</p>
                            <div id="product_MasterPic"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>渠道：</td>
                        <td><input type="text" id="linkPlatform"></td>
                    </tr>
                    <tr>
                        <td>链接地址：</td>
                        <td><input type="text" style="width: 300px;" id="linkUrl"></td>
                    </tr>
                </table>

            </div>
        </div>
    </div>

    <!--点击步骤-->
    <div class="nextNew">
        <span class="NextTab" id="prevSpan">上一步</span>
        <span class="NextTab" id="Next1">下一步</span>
        <span class="add_shop Essential" style="display: none;">确定</span>
        <span class="returnPrev Essential" style="display: none;background: #fff;color: #333;">返回</span>
        <span class="saveArticle" id="save" style="display: none;background: #fff; color: #333;">保存</span>
        <span class="saveArticle" id="release" style="display: none;">发布</span>
    </div>

    <!--商品列表渲染-->
    <script type="text/x-jsrender" id="EssentialTmp">
        {{for productPlatformList}}
            <tr data-index="{{:#index}}">
                <td>
                    <img src="{{:path}}" class="fl">
                    <a class="fl">
                       <span>{{:productName}}</span>
                        {{if linkUrl==="1"}}
                            <span>￥{{:discountPrice}}</span>
                            <span style="text-decoration: line-through;">￥{{:costPrice}}</span>
                            <span>折</span>
                            {{else linkUrl==="0"}}
                                <span>￥{{:costPrice}}</span>
                        {{/if}}
                    </a>

                </td>
                <td>{{:brandName}}</td>
                <td>{{:categoryName}}</td>
                <td>{{:shopName}}</td>
                <td>{{:stock}}</td>
                <td>{{:saleNum}}</td>
                <td style="width:100px;">{{:createTime}}</td>
                <td>{{:productStatusName}}</td>
                <td>{{:selfName}}</td>
                <td><a href='javascript:;' class='checkEssential'>查看</a><br><a href='javascript:;' class='addEssentialGods'>添加</a></td>
            </tr>
        {{/for}}
    </script>

    <!--奕赏商品列表所有品牌渲染-->
    <script type="text/x-jsrender" id="EsBrandsTmp">
        {{for brandVoList}}
            <option value={{:brandId}}>{{:brandName}}</option>
        {{/for}}
    </script>
    <!--奕赏商品列表所有品类渲染-->
    <script type="text/x-jsrender" id="EsCategoryTmp">
        {{for info}}
            <option value={{:categoryId}}>{{:categoryName}}</option>
        {{/for}}
    </script>
    <!--奕赏商品列表所有商家渲染-->
    <script type="text/x-jsrender" id="EsShopTmp">
        {{for info}}
            <option value={{:name}}>{{:name}}</option>
        {{/for}}
    </script>
</div>

<script type="text/javascript" src="js/busi_platform/business/discovery/jquery.multipurpose_tabcontent.js"></script>
<script type="text/javascript" src="js/base_platform/platform_marketing/newDiscovery.js"></script>

<script src="plugins/pagination/jquery.page.js"></script>

<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法geteditor1创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.geteditor1('editor')就能拿到相关的实例
    UE.delEditor("editor1");

    var ue = UE.getEditor('editor1');
    ue.addListener("ready", function (){
        $.ajax({
            type: "POST",
            url:PLATFORM_URL_PRE+"/essential/articleGroup/queryGroupList",
            dataType: "text",
            timeout: 20000,
            cache: false,
            success: function (data) {
                var json = eval("(" + data+ ")");
                if(json.code==1)
                {
                    for(var i=0;i<json.info.length;i++)
                    {
                        $("#column").append("<option value="+json.info[i].articleGroupId+">" +
                                ""+json.info[i].groupName+"</option>")
                    }
                }
            }
        });
    });

</script>
</body>
</html>